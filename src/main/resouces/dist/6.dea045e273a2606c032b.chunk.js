webpackJsonp([6],{241:function(e,t,a){"use strict";function n(e){r||a(793)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(436),d=a.n(o);for(var s in o)"default"!==s&&function(e){a.d(t,e,function(){return o[e]})}(s);var i=a(796),l=a.n(i),r=!1,u=a(0),c=n,p=u(d.a,l.a,!1,c,null,null);p.options.__file="src\\views\\system\\business\\systemDefinition\\module\\systemModule-manage.vue",t.default=p.exports},253:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.format=function(e){if(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+(a>=10?a:"0"+a)+"-"+(n>=10?n:"0"+n)}return""},t.default=n},265:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),d=n(o),s=a(253),i=n(s),l=a(5),r=n(l),u={},c={"Content-Type":"application/json;charset=UTF-8"};u.setPage=function(e){this.spa=e},u.page=function(e){var t=this;d.default.ajax.post(this.spa.listurl,e,c).then(function(e){if(e&&e.data&&!e.data.pageSize)return void t.spa.$Modal.error({title:"提示",content:e.data.msg});e.data.pageSize?(t.spa.list_data=e.data.rows,t.spa.totalPage=e.data.totalPage,t.spa.totalCount=e.data.totalCount,t.spa.pageSize=e.data.pageSize):u.err(e.data)}).catch(function(e){r.default.remove("access"),r.default.remove("user"),t.spa.$Modal.error({title:"出错啦",content:e})})},u.add=function(){this.spa.$refs.dataList.selectAll(!1),this.spa.addModel={},this.spa.addModal=!0},u.choice=function(e,t){this.spa.selectedLines=e.length,this.spa.viewOrUpdateModel=t,this.spa.deletedPks.push(t.userId)},u.cancel=function(e,t){this.spa.selectedLines=e.length,this.spa.selectedLines>0?(this.spa.viewOrUpdateModel=e[0],this.spa.deletedPks.splice(this.spa.deletedPks.indexOf(t.userId),1)):(this.spa.viewOrUpdateModel={},this.spa.deletedPks=[])},u.view=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须且只能选中一条记录！"}):(this.spa.viewOrUpdateModel.birthDate=i.default.format(this.spa.viewOrUpdateModel.birthDate),this.spa.viewModal=!0)},u.update=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须且只能选中一条记录！"}):(this.spa.viewOrUpdateModel.birthDate=i.default.format(this.spa.viewOrUpdateModel.birthDate),this.spa.addModel=this.spa.viewOrUpdateModel,this.spa.addModal=!0)},u.delete=function(e){var t=this;this.spa.selectedLines<1?this.spa.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"}):this.spa.$Modal.confirm({title:"提示信息",content:"确认要删除选中的记录吗！",onOk:function(){d.default.ajax.delete(e,c).then(function(e){"000002"===e.data.code?(t.spa.$Message.success("删除成功!"),t.spa.deletedPks=[],t.spa.selectedLines=0,t.spa.viewOrUpdateModel={},u.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):u.err(e.data)})},onCancel:function(){}})},u.save=function(e){var t=this;this.spa.$refs[e].validate(function(e){e?d.default.ajax.put(t.spa.saveurl,t.spa.addModel,c).then(function(e){"000001"===e.data.code||"000003"===e.data.code?(t.spa.$Message.success("Success!"),t.spa.addModal=!1,u.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):t.spa.$Modal.error({title:"错误信息",content:e.data.code+"\r\n"+e.data.msg+"\r\n"+e.data.excetion})}):(t.spa.$Message.error("Fail!"),t.spa.loading=!1,t.spa.$nextTick(function(){t.spa.loading=!0}))})},u.reset=function(e){this.spa.$refs[e].resetFields()},u.orgList=function(){var e=this;d.default.ajax.post("/system/SY0002L.do",{pageSize:9999,currentPage:1},c).then(function(t){t.data.rows&&(e.spa.orgList=t.data.rows.map(function(e){return{value:e.orgCode,label:e.orgCode+" - "+e.orgName}}))})},u.sort=function(e,t){console.log(e);var a=e.key,n=e.order,o=["asc","desc"];for(var d in o){var s=this.spa.orderFileds.indexOf(a+" "+o[d]);s>-1&&this.spa.orderFileds.splice(s,1)}"normal"!==n&&this.spa.orderFileds.push(a+" "+n),t.orderBy=this.spa.orderFileds.join(","),console.log(t),u.page(t)},u.getButtons=function(){var e=this,t=r.default.get("menucode");if(!t)return void this.spa.$Message.error("没有配置菜单权限!");var a=r.default.get("allButtonRights");a?u.doButtonExt(JSON.parse(a)[t]):d.default.ajax.post("/system/SY0005L2.do",{},c).then(function(n){if(!n.data)return void e.spa.$Message.error("从服务器端获取功能按钮权限出错!");r.default.set("allButtonRights",a=n.data),u.doButtonExt(a[t])})},u.doButtonExt=function(e){if(!e)return void this.spa.$Message.error("没有取到相应的功能按钮权限!");this.spa.buttonInfos=e},u.err=function(e){this.spa.$Message.error({content:e.code+"\r\n"+e.msg+"\r\n"+e.excetion,duration:30})},t.default=u},436:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(253),d=n(o),s=a(265),i=n(s),l=a(795),r=n(l),u=a(5),c=n(u);t.default={name:"module-info",data:function(){return{headers:{"Content-Type":"application/json;charset=UTF-8"},listurl:"/business/TK0004L.do",saveurl:"/business/TK0004I.do",deleteurl:"/business/TK0004D.do",updateurl:"/business/TK0004U.do",selecturl:"/business/TK0001T.do",gettaburl:"/business/TK0004L1.do",list_data:[],pageSize:10,currentPage:1,totalCount:0,totalPage:0,sModuCode:"",sModuCName:"",sModuEName:"",addModal:!1,addModel:{},loading:!0,modelAddRules:{moduCode:[{required:!0}],moduCName:[{required:!0}],moduTC:[{required:!0}],moduModel:[{required:!0}],relTable:[{required:!0}]},modelUpdRules:{moduModel:[{required:!0}],relTable:[{required:!0}]},viewOrUpdateModel:{},columns:[],selectedLines:0,deletedPks:[],viewModal:!1,modList:[],tabList:[]}},methods:{getSearchCond:function(){return{menuCode:"",pageSize:this.pageSize,currentPage:this.currentPage,valObj:{moduCode:this.sModuCode,moduCName:this.sModuCName}}},init:function(){i.default.setPage(this),r.default.setPage(this),i.default.page(this.getSearchCond()),this.columns=r.default.getColumns()},searching:function(){i.default.page(this.getSearchCond())},changePage:function(e){var t=this.getSearchCond();t.currentPage=e,i.default.page(t)},changePageSize:function(e){var t=this.getSearchCond();t.pageSize=e,i.default.page(t)},sorting:function(e){i.default.sort(e,this.getSearchCond())},choicing:function(e,t){r.default.choice(e,t)},cancing:function(e,t){r.default.cancel(e,t)},handleInsert:function(){this.addModal=!0,this.handleReset("addFormRef"),this.modList=[],this.tabList=[],r.default.getModList(this.selecturl),r.default.getTabList(this.gettaburl)},saving:function(e){this.addModel.crtDate=d.default.format(new Date),i.default.save(e)},reseting:function(e){i.default.reset(e)},handleReset:function(e){this.$refs[e].resetFields()},handleDelete:function(){r.default.delete(this.deleteurl+"?moduCode="+this.deletedPks.join(","))},handleUpdate:function(){if(this.selectedLines<1)return void this.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"});r.default.getModList(this.selecturl),r.default.getTabList(this.gettaburl),this.viewModal=!0},update:function(e){this.viewOrUpdateModel.updDate=d.default.format(new Date),r.default.update(e)},codeGeneration:function(){if(this.selectedLines<1)return void this.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"});var e=new URLSearchParams;e.append("moduCode",this.viewOrUpdateModel.moduCode),r.default.codeGeneration(e)}},created:function(){this.init()},computed:{getFont:function(){var e=c.default.get("sizeValue"),t=this.$store.state.app.sizeFont;return e||t}}}},793:function(e,t,a){var n=a(794);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(11)("feecbc40",n,!1,{})},794:function(e,t,a){t=e.exports=a(10)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},795:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(3),d=(n(o),a(28)),s=(n(d),a(253)),i=n(s),l=a(9),r=n(l),u={},c={"Content-Type":"application/json;charset=UTF-8"};u.setPage=function(e){this.spa=e},u.getColumns=function(){return[{type:"selection",width:60,align:"center"},{title:"模块代码",key:"moduCode",sortable:"custom",align:"center"},{title:"中文名称",key:"moduCName",align:"center"},{title:"模块交易号",key:"moduTC",align:"center"},{title:"所属模型",key:"modName",align:"center"},{title:"创建日期",key:"crtDate",sortable:"custom",align:"center",render:function(e,t){return e("div",i.default.format(t.row.crtDate))}},{title:"修改日期",key:"updDate",sortable:"custom",align:"center",render:function(e,t){return e("div",i.default.format(t.row.updDate))}}]},u.choice=function(e,t){this.spa.selectedLines=e.length,this.spa.viewOrUpdateModel=t,this.spa.deletedPks.push(t.moduCode)},u.cancel=function(e,t){this.spa.selectedLines=e.length,this.spa.selectedLines>0?(this.spa.viewOrUpdateModel=e[0],this.spa.deletedPks.splice(this.spa.deletedPks.indexOf(t.moduCode),1)):(this.spa.viewOrUpdateModel={},this.spa.deletedPks=[])},u.update=function(e){var t=this;this.spa.$refs[e].validate(function(e){e?(t.spa.viewOrUpdateModel.crtDate=i.default.format(t.spa.viewOrUpdateModel.crtDate),t.spa.viewOrUpdateModel.updDate=i.default.format(t.spa.viewOrUpdateModel.updDate),r.default.ajax.put(t.spa.updateurl,t.spa.viewOrUpdateModel,c).then(function(e){"000003"===e.data.code?(t.spa.$Message.success("修改成功!"),t.spa.viewModal=!1,t.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):t.spa.$Modal.error({title:"错误信息",content:e.data.code+"\r\n"+e.data.msg+"\r\n"+e.data.excetion})})):(t.spa.$Message.error("修改失败!"),t.spa.loading=!1,t.spa.$nextTick(function(){t.spa.loading=!0}))})},u.delete=function(e){var t=this;this.spa.selectedLines<1?this.spa.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"}):this.spa.$Modal.confirm({title:"提示信息",content:"确认要删除选中的记录吗！",onOk:function(){r.default.ajax.delete(e,c).then(function(e){"000002"===e.data.code?(t.spa.$Message.success("删除成功!"),t.spa.deletedPks=[],t.spa.selectedLines=0,t.spa.viewOrUpdateModel={},t.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):t.err(e.data)})},onCancel:function(){}})},u.page=function(e){var t=this;r.default.ajax.post(this.spa.listurl,e,c).then(function(e){if(e&&e.data&&!e.data.pageSize)return void t.spa.$Modal.error({title:"提示",content:e.data.msg});e.data.pageSize?(t.spa.list_data=e.data.rows,t.spa.totalPage=e.data.totalPage,t.spa.totalCount=e.data.totalCount,t.spa.pageSize=e.data.pageSize):t.err(e.data)}).catch(function(e){t.spa.$Modal.error({title:"出错啦",content:e})})},u.err=function(e){this.spa.$Message.error({content:e.code+"\r\n"+e.msg+"\r\n"+e.excetion,duration:30})},u.getModList=function(e){var t=this;r.default.ajax.post(e,c).then(function(e){var a=[];e.data.forEach(function(e){var t={value:e.modCode,label:e.modName};a.push(t)}),t.spa.modList=a})},u.getTabList=function(e){var t=this;r.default.ajax.post(e,c).then(function(e){var a=[];e.data.forEach(function(e){var t={value:e,label:e};a.push(t)}),t.spa.tabList=a})},u.codeGeneration=function(e){var t=this;r.default.ajax.post("/business/TK0004G.do",e,c).then(function(e){e.data?t.spa.$Message.success("Success!"):t.spa.$Modal.error({title:"错误信息",content:"文件生成失败！"})})},t.default=u},796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"compose"}}),e._v("模块定义")],1),e._v(" "),a("Row",[a("p",[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入模块代码搜索",icon:"search"},on:{"on-change":e.searching},model:{value:e.sModuCode,callback:function(t){e.sModuCode=t},expression:"sModuCode"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入模块中文名称搜索",icon:"search"},on:{"on-change":e.searching},model:{value:e.sModuCName,callback:function(t){e.sModuCName=t},expression:"sModuCName"}}),e._v("\n\t\t\t\t\t\t \n                \t\t"),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleInsert()}}},[e._v("新增")]),e._v(" "),a("Button",{attrs:{type:"success"},on:{click:function(t){e.handleUpdate()}}},[e._v("修改")]),e._v(" "),a("Button",{attrs:{type:"warning"},on:{click:function(t){e.handleDelete()}}},[e._v("删除")]),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(t){e.codeGeneration()}}},[e._v("代码生成")])],1)]),e._v(" "),a("Row",[a("Table",{ref:"dataList",attrs:{"highlight-row":"",border:"",size:e.getFont,height:"410",columns:e.columns,data:e.list_data,stripe:!0},on:{"on-select":e.choicing,"on-select-cancel":e.cancing,"on-sort-change":e.sorting}}),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalCount,current:1,"page-size":e.pageSize,transfer:!0,size:e.getFont,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),e._v(" "),a("Modal",{attrs:{width:"700",title:"模块信息","ok-text":"保存","cancel-text":"关闭","mask-closable":!1,loading:e.loading},on:{"on-ok":function(t){e.saving("addFormRef")},"on-cancel":function(t){e.reseting("addFormRef")}},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{ref:"addFormRef",attrs:{model:e.addModel,rules:e.modelAddRules,"label-width":100}},[a("FormItem",{attrs:{label:"模块代码",prop:"moduCode"}},[a("Input",{attrs:{placeholder:"请输入4位模块代码"},model:{value:e.addModel.moduCode,callback:function(t){e.$set(e.addModel,"moduCode",t)},expression:"addModel.moduCode"}})],1),e._v(" "),a("FormItem",{attrs:{label:"中文名称",prop:"moduCName"}},[a("Input",{attrs:{placeholder:"请输入模块中文名称"},model:{value:e.addModel.moduCName,callback:function(t){e.$set(e.addModel,"moduCName",t)},expression:"addModel.moduCName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"模块交易号",prop:"moduTC"}},[a("Input",{model:{value:e.addModel.moduTC,callback:function(t){e.$set(e.addModel,"moduTC",t)},expression:"addModel.moduTC"}})],1),e._v(" "),a("FormItem",{attrs:{label:"所属模型",prop:"moduModel"}},[a("Select",{model:{value:e.addModel.moduModel,callback:function(t){e.$set(e.addModel,"moduModel",t)},expression:"addModel.moduModel"}},e._l(e.modList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t\t\t")])}))],1),e._v(" "),a("FormItem",{attrs:{label:"关联表",prop:"relTable"}},[a("Select",{attrs:{filterable:""},model:{value:e.addModel.relTable,callback:function(t){e.$set(e.addModel,"relTable",t)},expression:"addModel.relTable"}},e._l(e.tabList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t\t\t")])}))],1)],1)],1),e._v(" "),a("Modal",{attrs:{width:"700",title:"模块信息","ok-text":"保存","cancel-text":"关闭","mask-closable":!1,loading:e.loading},on:{"on-ok":function(t){e.update("updFormRef")}},model:{value:e.viewModal,callback:function(t){e.viewModal=t},expression:"viewModal"}},[a("Form",{ref:"updFormRef",attrs:{model:e.viewOrUpdateModel,"label-width":100,rules:e.modelUpdRules}},[a("FormItem",{attrs:{label:"模块代码",prop:"moduCode"}},[a("Input",{attrs:{disabled:""},model:{value:e.viewOrUpdateModel.moduCode,callback:function(t){e.$set(e.viewOrUpdateModel,"moduCode",t)},expression:"viewOrUpdateModel.moduCode"}})],1),e._v(" "),a("FormItem",{attrs:{label:"中文名称",prop:"moduCName"}},[a("Input",{model:{value:e.viewOrUpdateModel.moduCName,callback:function(t){e.$set(e.viewOrUpdateModel,"moduCName",t)},expression:"viewOrUpdateModel.moduCName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"模块交易号",prop:"moduTC"}},[a("Input",{model:{value:e.viewOrUpdateModel.moduTC,callback:function(t){e.$set(e.viewOrUpdateModel,"moduTC",t)},expression:"viewOrUpdateModel.moduTC"}})],1),e._v(" "),a("FormItem",{attrs:{label:"所属模型",prop:"moduModel"}},[a("Select",{model:{value:e.viewOrUpdateModel.moduModel,callback:function(t){e.$set(e.viewOrUpdateModel,"moduModel",t)},expression:"viewOrUpdateModel.moduModel"}},e._l(e.modList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"关联表",prop:"relTable"}},[a("Select",{attrs:{filterable:""},model:{value:e.viewOrUpdateModel.relTable,callback:function(t){e.$set(e.viewOrUpdateModel,"relTable",t)},expression:"viewOrUpdateModel.relTable"}},e._l(e.tabList,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t\t\t")])}))],1)],1)],1)],1)],1)],1)},o=[];n._withStripped=!0;var d={render:n,staticRenderFns:o};t.default=d}});