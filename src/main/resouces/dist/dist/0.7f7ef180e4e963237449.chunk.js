webpackJsonp([0],{267:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};n.format=function(e){if(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate();return t.getFullYear()+"-"+(a>=10?a:"0"+a)+"-"+(n>=10?n:"0"+n)}return""},t.default=n},293:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(9),r=n(o),s=a(267),i=n(s),l=a(5),d=n(l),u={},c={"Content-Type":"application/json;charset=UTF-8"};u.setPage=function(e){this.spa=e},u.page=function(e){var t=this;r.default.ajax.post(this.spa.listurl,e,c).then(function(e){if(e&&e.data&&!e.data.pageSize)return void t.spa.$Modal.error({title:"提示",content:e.data.msg});e.data.pageSize?(t.spa.list_data=e.data.rows,t.spa.totalPage=e.data.totalPage,t.spa.totalCount=e.data.totalCount,t.spa.pageSize=e.data.pageSize):u.err(e.data)}).catch(function(e){d.default.remove("access"),d.default.remove("user"),t.spa.$Modal.error({title:"出错啦",content:e})})},u.add=function(){this.spa.$refs.dataList.selectAll(!1),this.spa.addModel={},this.spa.addModal=!0},u.choice=function(e,t){this.spa.selectedLines=e.length,this.spa.viewOrUpdateModel=t,this.spa.deletedPks.push(t.userId)},u.cancel=function(e,t){this.spa.selectedLines=e.length,this.spa.selectedLines>0?(this.spa.viewOrUpdateModel=e[0],this.spa.deletedPks.splice(this.spa.deletedPks.indexOf(t.userId),1)):(this.spa.viewOrUpdateModel={},this.spa.deletedPks=[])},u.view=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须且只能选中一条记录！"}):(this.spa.viewOrUpdateModel.birthDate=i.default.format(this.spa.viewOrUpdateModel.birthDate),this.spa.viewModal=!0)},u.update=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须且只能选中一条记录！"}):(this.spa.viewOrUpdateModel.birthDate=i.default.format(this.spa.viewOrUpdateModel.birthDate),this.spa.addModel=this.spa.viewOrUpdateModel,this.spa.addModal=!0)},u.delete=function(e){var t=this;this.spa.selectedLines<1?this.spa.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"}):this.spa.$Modal.confirm({title:"提示信息",content:"确认要删除选中的记录吗！",onOk:function(){r.default.ajax.delete(e,c).then(function(e){"000002"===e.data.code?(t.spa.$Message.success("删除成功!"),t.spa.deletedPks=[],t.spa.selectedLines=0,t.spa.viewOrUpdateModel={},u.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):u.err(e.data)})},onCancel:function(){}})},u.save=function(e){var t=this;this.spa.$refs[e].validate(function(e){e?r.default.ajax.put(t.spa.saveurl,t.spa.addModel,c).then(function(e){"000001"===e.data.code||"000003"===e.data.code?(t.spa.$Message.success("Success!"),t.spa.addModal=!1,u.page({pageSize:t.spa.pageSize,currentPage:t.spa.currentPage})):t.spa.$Modal.error({title:"错误信息",content:e.data.code+"\r\n"+e.data.msg+"\r\n"+e.data.excetion})}):(t.spa.$Message.error("Fail!"),t.spa.loading=!1,t.spa.$nextTick(function(){t.spa.loading=!0}))})},u.reset=function(e){this.spa.$refs[e].resetFields()},u.orgList=function(){var e=this;r.default.ajax.post("/system/SY0002L.do",{pageSize:9999,currentPage:1},c).then(function(t){t.data.rows&&(e.spa.orgList=t.data.rows.map(function(e){return{value:e.orgCode,label:e.orgCode+" - "+e.orgName}}))})},u.sort=function(e,t){console.log(e);var a=e.key,n=e.order,o=["asc","desc"];for(var r in o){var s=this.spa.orderFileds.indexOf(a+" "+o[r]);s>-1&&this.spa.orderFileds.splice(s,1)}"normal"!==n&&this.spa.orderFileds.push(a+" "+n),t.orderBy=this.spa.orderFileds.join(","),console.log(t),u.page(t)},u.getButtons=function(){var e=this,t=d.default.get("menucode");if(!t)return void this.spa.$Message.error("没有配置菜单权限!");var a=d.default.get("allButtonRights");a?u.doButtonExt(JSON.parse(a)[t]):r.default.ajax.post("/system/SY0005L2.do",{},c).then(function(n){if(!n.data)return void e.spa.$Message.error("从服务器端获取功能按钮权限出错!");d.default.set("allButtonRights",a=n.data),u.doButtonExt(a[t])})},u.doButtonExt=function(e){if(!e)return void this.spa.$Message.error("没有取到相应的功能按钮权限!");this.spa.buttonInfos=e},u.err=function(e){this.spa.$Message.error({content:e.code+"\r\n"+e.msg+"\r\n"+e.excetion,duration:30})},t.default=u},49:function(e,t,a){"use strict";function n(e){d||a(797)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(730),r=a.n(o);for(var s in o)"default"!==s&&function(e){a.d(t,e,function(){return o[e]})}(s);var i=a(800),l=a.n(i),d=!1,u=a(0),c=n,p=u(r.a,l.a,!1,c,null,null);p.options.__file="src\\views\\system\\user\\user-manage.vue",t.default=p.exports},730:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(267),r=(n(o),a(293)),s=n(r),i=a(799),l=n(i),d=a(5),u=n(d);t.default={name:"user-info",data:function(){return{headers:{"Content-Type":"application/json;charset=UTF-8"},listurl:"/system/SY0001L.do",saveurl:"/system/SY0001I.do",deleteurl:"/system/SY0001D.do",viewModal:!1,addModal:!1,viewOrUpdateModel:{},addModel:{},loading:!0,pageSize:10,currentPage:1,totalPage:0,totalCount:0,list_data:[],orgList:[],deletedPks:[],orderFileds:[],sUserCode:"",sUserName:"",sOrgCode:"",selectedLines:0,buttonInfos:[],userRules:{remark:[{required:!0,message:"请填写该员工所有相关未尽事宜，务必减少疏漏之处",trigger:"blur"}]},columns:[]}},methods:{getSearchCond:function(){return{menuCode:u.default.get("menucode"),pageSize:this.pageSize,currentPage:this.currentPage,valObj:{userCode:this.sUserCode,userName:this.sUserName,orgCode:this.sOrgCode}}},onClicking:function(e){"VIEW"===e||"view"===e?s.default.view():"ADD"===e||"add"===e?s.default.add():"UPD"===e||"upd"===e?s.default.update():"DEL"!==e&&"del"!==e||s.default.delete(this.deleteurl+"?userId="+this.deletedPks.join(","))},init:function(){s.default.setPage(this),l.default.setPage(this),s.default.page(this.getSearchCond()),s.default.getButtons(),this.columns=l.default.getColumns()},searching:function(){s.default.page(this.getSearchCond())},changePage:function(e){var t=this.getSearchCond();t.currentPage=e,s.default.page(t)},changePageSize:function(e){var t=this.getSearchCond();t.pageSize=e,s.default.page(t)},choicing:function(e,t){s.default.choice(e,t)},cancing:function(e,t){s.default.cancel(e,t)},saving:function(e){s.default.save(e)},reseting:function(e){s.default.reset(e)},orgListing:function(){s.default.orgList()},sorting:function(e){s.default.sort(e,this.getSearchCond())},handleClearCurrentRow:function(){this.$refs.dataList.clearCurrentRow()}},mounted:function(){},created:function(){this.init(),this.orgListing()},computed:{getFont:function(){var e=u.default.get("sizeValue"),t=this.$store.state.app.sizeFont;return e||t}}}},797:function(e,t,a){var n=a(798);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(11)("3a2b99a6",n,!1,{})},798:function(e,t,a){t=e.exports=a(10)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},799:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(3),r=(n(o),a(28)),s=(n(r),a(267)),i=n(s),l={};l.setPage=function(e){this.spa=e},l.getColumns=function(){var e=this;return[{type:"selection",width:60,align:"center"},{title:"主键",key:"userId",align:"center"},{title:"编号",key:"userCode",sortable:"custom",align:"center",filter:{type:"Input"},filterMethod:function(e,t){return t.userCode===e}},{title:"姓名",key:"userName",align:"center"},{title:"机构编号",key:"orgCode",sortable:"custom",align:"center"},{title:"岗位",key:"postNo",align:"center"},{title:"性别",key:"userSex",align:"center",filters:[{label:"男",value:"1"},{label:"女",value:"2"}],filterMultiple:!1,filterMethod:function(e,t){return t.userSex===e},render:function(e,t){var a=t.row;return e("Tag",{props:{type:"dot",color:"1"===a.userSex?"blue":"red"}},"1"===a.userSex?"男":"女")}},{title:"国籍",key:"nationality",align:"center",render:function(t,a){return t("Poptip",{props:{trigger:"hover",title:"小资料",placement:"bottom"}},[t("Tag",a.row.nationality),t("div",{slot:"content"},[t("ul",e.spa.list_data[a.index].nationality)])])}},{title:"民族",key:"ethnic",align:"center"},{title:"出生日期",key:"birthDate",align:"center",filters:[{label:"大于18岁",value:"1"},{label:"小于等于18岁",value:"2"}],filterMultiple:!1,filterMethod:function(e,t){return 1===e?t.birthDate<"1993-01-01":t.birthDate>="1993-01-01"},render:function(e,t){return e("div",i.default.format(t.row.birthDate))}}]},t.default=l},800:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"compose"}}),e._v("用户管理")],1),e._v(" "),a("Row",[a("p",[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名编号搜索",icon:"search"},on:{"on-change":e.searching},model:{value:e.sUserCode,callback:function(t){e.sUserCode=t},expression:"sUserCode"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名搜索",icon:"search"},on:{"on-change":e.searching},model:{value:e.sUserName,callback:function(t){e.sUserName=t},expression:"sUserName"}}),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机构搜索",icon:"search"},on:{"on-change":e.searching},model:{value:e.sOrgCode,callback:function(t){e.sOrgCode=t},expression:"sOrgCode"}},[e._v(">")]),e._v(" "),e._l(e.buttonInfos,function(t,n){return a("Button",{key:t.code,staticStyle:{margin:"2px"},attrs:{size:e.getFont,type:t.icon},on:{click:function(a){e.onClicking(t.href)}}},[e._v(e._s(t.title))])})],2)]),e._v(" "),a("Row",[a("Table",{ref:"dataList",attrs:{"highlight-row":"",border:"",size:e.getFont,height:"410",columns:e.columns,data:e.list_data,stripe:!0},on:{"on-select":e.choicing,"on-select-cancel":e.cancing,"on-sort-change":e.sorting}}),e._v(" "),a("Button",{attrs:{type:"Primary"},on:{click:e.handleClearCurrentRow}},[e._v("清除单选")]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.totalCount,current:1,"page-size":e.pageSize,transfer:!0,size:e.getFont,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),e._v(" "),a("Modal",{attrs:{width:"700",title:"用户信息查看"},model:{value:e.viewModal,callback:function(t){e.viewModal=t},expression:"viewModal"}},[a("Form",{attrs:{model:e.viewOrUpdateModel,"label-width":100}},[a("FormItem",{attrs:{label:"姓名："}},[a("Input",{attrs:{readonly:!0},model:{value:e.viewOrUpdateModel.userName,callback:function(t){e.$set(e.viewOrUpdateModel,"userName",t)},expression:"viewOrUpdateModel.userName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"英文名："}},[a("Input",{attrs:{readonly:!0},model:{value:e.viewOrUpdateModel.userNameEn,callback:function(t){e.$set(e.viewOrUpdateModel,"userNameEn",t)},expression:"viewOrUpdateModel.userNameEn"}})],1),e._v(" "),a("FormItem",{attrs:{label:"备注："}},[a("Input",{attrs:{disabled:"",type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:e.viewOrUpdateModel.remark,callback:function(t){e.$set(e.viewOrUpdateModel,"remark",t)},expression:"viewOrUpdateModel.remark"}})],1),e._v(" "),a("FormItem",{attrs:{label:"性别："}},[a("RadioGroup",{model:{value:e.viewOrUpdateModel.userSex,callback:function(t){e.$set(e.viewOrUpdateModel,"userSex",t)},expression:"viewOrUpdateModel.userSex"}},[a("Radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v("女")])],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{width:"700",title:"用户信息","ok-text":"保存","cancel-text":"关闭","mask-closable":!1,loading:e.loading},on:{"on-ok":function(t){e.saving("addFormRef")},"on-cancel":function(t){e.reseting("addFormRef")}},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[a("Form",{ref:"addFormRef",attrs:{model:e.addModel,rules:e.userRules,"label-width":100}},[a("FormItem",{attrs:{label:"编号：",required:""}},[a("Input",{attrs:{placeholder:"请输入7位员工编号"},model:{value:e.addModel.userCode,callback:function(t){e.$set(e.addModel,"userCode",t)},expression:"addModel.userCode"}})],1),e._v(" "),a("FormItem",{attrs:{label:"姓名：",required:""}},[a("Input",{attrs:{placeholder:"请输入中文姓名"},model:{value:e.addModel.userName,callback:function(t){e.$set(e.addModel,"userName",t)},expression:"addModel.userName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"机构：",required:""}},[a("Select",{attrs:{placeholder:"请选择机构...",filterable:""},model:{value:e.addModel.orgCode,callback:function(t){e.$set(e.addModel,"orgCode",t)},expression:"addModel.orgCode"}},e._l(e.orgList,function(t,n){return a("Option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"出生地："}},[a("Select",{model:{value:e.addModel.birthPlace,callback:function(t){e.$set(e.addModel,"birthPlace",t)},expression:"addModel.birthPlace"}},[a("Option",{attrs:{value:"beijing"}},[e._v("New York")]),e._v(" "),a("Option",{attrs:{value:"shanghai"}},[e._v("London")]),e._v(" "),a("Option",{attrs:{value:"shenzhen"}},[e._v("Sydney")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"出生日期："}},[a("DatePicker",{attrs:{type:"date",placeholder:"Select date"},model:{value:e.addModel.birthDate,callback:function(t){e.$set(e.addModel,"birthDate",t)},expression:"addModel.birthDate"}})],1),e._v(" "),a("FormItem",{attrs:{label:"性别："}},[a("RadioGroup",{model:{value:e.addModel.userSex,callback:function(t){e.$set(e.addModel,"userSex",t)},expression:"addModel.userSex"}},[a("Radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),a("Radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"备注：",prop:"remark"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注"},model:{value:e.addModel.remark,callback:function(t){e.$set(e.addModel,"remark",t)},expression:"addModel.remark"}})],1)],1)],1)],1)],1)],1)},o=[];n._withStripped=!0;var r={render:n,staticRenderFns:o};t.default=r}});