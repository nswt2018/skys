webpackJsonp([9],{239:function(e,t,r){"use strict";function o(e){l||r(801)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(731),n=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var d=r(804),s=r.n(d),l=!1,u=r(0),g=o,c=u(n.a,s.a,!1,g,null,null);c.options.__file="src\\views\\system\\org\\sys-org.vue",t.default=c.exports},267:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};o.format=function(e){if(e){var t=new Date(e),r=t.getMonth()+1,o=t.getDate();return t.getFullYear()+"-"+(r>=10?r:"0"+r)+"-"+(o>=10?o:"0"+o)}return""},t.default=o},710:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(9),n=o(a),i=r(5),d=o(i),s=r(267),l=(o(s),{}),u={"Content-Type":"application/json;charset=UTF-8"};l.setPage=function(e){this.spa=e},l.page=function(e){var t=this;n.default.ajax.post(this.spa.listurl,e,u).then(function(e){if(!e||!e.data)return void t.spa.$Modal.error({title:"提示",content:e.data.msg});t.spa.data_list=e.data.rows,t.spa.totalCount=e.data.totalCount}).catch(function(e){l.err(e)})},l.view=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须且只能选中一条记录！"}):this.spa.viewModal=!0},l.add=function(){this.spa.addModal=!0},l.update=function(){1!=this.spa.selectedLines?this.spa.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"}):this.spa.updModal=!0},l.delete=function(e){var t=this;this.spa.selectedLines<1?this.spa.$Modal.warning({title:"提示信息",content:"必须选中一条记录！"}):this.spa.$Modal.confirm({title:"确认信息",content:"确认要删除吗！",onOk:function(){n.default.ajax.delete(e,u).then(function(e){"000002"===e.data.code?(t.spa.$Message.success("删除成功!"),t.spa.selectedLines=0,t.spa.viewForm={},t.spa.updForm={},t.spa.deleteKey=[],l.page(t.spa.getSearch())):t.spa.$Modal.error({title:"错误信息",content:e.data.code+"\r\n"+e.data.msg+"\r\n"+e.data.excetion})}).catch(function(e){l.err(e)})}})},l.save=function(e){var t=this;this.spa.$refs[e].validate(function(r){if(r){var o=void 0,a=void 0;"addRef"===e?(o=t.spa.addForm,a=t.spa.saveurl):(o=t.spa.updForm,a=t.spa.updateurl),n.default.ajax.put(a,o,u).then(function(e){"000001"===e.data.code||"000003"===e.data.code?(t.spa.$Message.success("Success!"),t.spa.addModal=!1,t.spa.updModal=!1,l.page(t.spa.getSearch())):(t.spa.loading=!1,t.spa.$Modal.error({title:"错误信息",content:e.data.code+"\r\n"+e.data.msg+"\r\n"+e.data.excetion}))}).catch(function(e){t.spa.loading=!1,l.err(e)})}else t.spa.$Message.error("Fail!"),t.spa.loading=!1,t.spa.$nextTick(function(){t.spa.loading=!0})})},l.choice=function(e,t){this.spa.selectedLines=e.length,this.spa.viewForm=t,this.spa.updForm=t,this.spa.deleteKey.push(t.paraCode)},l.cancel=function(e,t){this.spa.selectedLines=e.length,this.spa.selectedLines>0?(this.spa.viewForm=e[0],this.spa.updForm=e[0],this.spa.deleteKey.splice(this.spa.deleteKey.indexOf(t.paraCode),1)):(this.spa.viewForm={},this.spa.updForm={},this.spa.deleteKey=[])},l.getButtons=function(){var e=this,t=d.default.get("allButtonRights");t?l.doButtonExt(JSON.parse(t)[1001]):n.default.ajax.post("/system/SY0005L2.do",{},u).then(function(r){if(!r.data)return void e.spa.$Message.error("从服务器端获取功能按钮权限出错!");console.log(r.data),d.default.set("allButtonRights",t=r.data),l.doButtonExt(t[1001])})},l.doButtonExt=function(e){if(!e)return void this.spa.$Message.error("没有取到相应的功能按钮权限!");this.spa.buttonInfos=e},l.err=function(e){this.spa.$Modal.error({title:"出错啦",content:e})},t.default=l},731:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(803),n=o(a),i=r(710),d=o(i),s=r(5),l=o(s);t.default={name:"org-info",data:function(){return{listurl:"/system/SY0003L1.do",saveurl:"/system/SY0003I1.do",deleteurl:"/system/SY0003D1.do",updateurl:"/system/SY0003U1.do",orgCode:"",orgBrief:"",addModal:!1,addForm:{},updModal:!1,updForm:{},viewModal:!1,viewForm:{},selectedLines:0,loading:!0,updloading:!0,size:"default",data_list:[],pageSize:10,currentPage:1,totalPage:0,totalCount:0,buttonInfos:[{title:"查看",code:"100101",icon:"info",href:"view"},{title:"新增",code:"100102",icon:"primary",href:"add"},{title:"修改",code:"100103",icon:"warning",href:"upd"},{title:"删除",code:"100104",icon:"error",href:"del"}],columns:[],deleteKey:[],addRules:{orgId:[{required:!0,message:"机构ID不能为空",trigger:"blur"}],orgCode:[{required:!0,message:"机构编码不能为空",trigger:"blur"}],orgBrief:[{required:!0,message:"机构简称不能为空",trigger:"blur"}],upOrgCode:[{required:!0,message:"直接上级机构ID不能为空",trigger:"blur"}],orgCategory:[{required:!0,message:"机构类别不能为空",trigger:"blur"}],orgGrade:[{required:!0,message:"机构级别不能为空",trigger:"blur"}],orgLevel:[{required:!0,message:"机构层级不能为空",trigger:"blur"}]},updRules:{orgId:[{required:!0,message:"机构ID不能为空",trigger:"blur"}],orgCode:[{required:!0,message:"机构编码不能为空",trigger:"blur"}],orgBrief:[{required:!0,message:"机构简称不能为空",trigger:"blur"}],upOrgCode:[{required:!0,message:"直接上级机构ID不能为空",trigger:"blur"}],orgCategory:[{required:!0,message:"机构类别不能为空",trigger:"blur"}],orgGrade:[{required:!0,message:"机构级别不能为空",trigger:"blur"}],orgLevel:[{required:!0,message:"机构层级不能为空",trigger:"blur"}]}}},methods:{getSearch:function(){return{menuCode:l.default.get("menucode"),pageSize:this.pageSize,currentPage:this.currentPage,valObj:{orgCode:this.orgCode,orgBrief:this.orgBrief}}},init:function(){d.default.setPage(this),d.default.page(this.getSearch()),this.columns=n.default.getColumns()},searching:function(){d.default.page(this.getSearch())},onClicking:function(e){"add"===e?d.default.add():"view"===e?d.default.view():"del"===e?d.default.delete(this.deleteurl+"?orgid="+this.deleteKey.join(",")):"upd"===e&&d.default.update()},saving:function(e){d.default.save(e)},reseting:function(e){this.$refs[e].resetFields()},choicing:function(e,t){this.selectedLines=e.length,this.viewForm=t,this.updForm=t,this.deleteKey.push(t.orgId)},cancing:function(e,t){this.selectedLines=e.length,this.selectedLines>0?(this.viewForm=e[0],this.updForm=e[0],this.deleteKey.splice(this.deleteKey.indexOf(t.orgId),1)):(this.viewForm={},this.updForm={},this.deleteKey=[])},choicingAll:function(e){this.selectedLines=e.length,this.deleteKey=[];for(var t=0;t<this.selectedLines;t++)this.deleteKey.push(e[t].orgId)},cancingAll:function(e){this.selectedLines=e.length,0==this.selectedLines&&(this.deleteKey=[])},changePage:function(e){var t=this.getSearch();t.currentPage=e,d.default.page(t)},changePageSize:function(e){var t=this.getSearch();t.pageSize=e,d.default.page(t)}},created:function(){this.init()},computed:{getFont:function(){var e=l.default.get("sizeValue"),t=this.$store.state.app.sizeFont;return e||t}}}},801:function(e,t,r){var o=r(802);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);r(11)("5a22f107",o,!1,{})},802:function(e,t,r){t=e.exports=r(10)(!1),t.push([e.i,"\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n",""])},803:function(e,t,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(3),n=(o(a),r(28)),i=(o(n),{});i.getColumns=function(){return[{type:"selection",width:60,align:"center"},{title:"机构ID",key:"orgId",align:"center"},{title:"机构编码",key:"orgCode",align:"center"},{title:"机构简称",key:"orgBrief",align:"center"},{title:"直接上级机构ID",key:"upOrgCode",align:"center"},{title:"机构类别",key:"orgCategory",align:"center"},{title:"机构级别",key:"orgGrade",align:"center"},{title:"机构层级",key:"orgLevel",align:"center"}]},t.default=i},804:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Row",[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[r("Icon",{attrs:{type:"compose"}}),e._v("机构信息")],1),e._v(" "),r("Row",[r("p",[r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机构编码",icon:"search"},on:{"on-change":e.searching},model:{value:e.orgCode,callback:function(t){e.orgCode=t},expression:"orgCode"}}),e._v(" "),r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入机构简称",icon:"search"},on:{"on-change":e.searching},model:{value:e.orgBrief,callback:function(t){e.orgBrief=t},expression:"orgBrief"}}),e._v(" "),e._l(e.buttonInfos,function(t,o){return r("Button",{key:t.code,staticStyle:{margin:"2px"},attrs:{size:e.getFont,type:t.icon},on:{click:function(r){e.onClicking(t.href)}}},[e._v(e._s(t.title))])})],2)]),e._v(" "),r("Row",[r("Table",{ref:"orgList",attrs:{"highlight-row":"",border:"",size:e.getFont,height:"410",columns:e.columns,stripe:!0,data:e.data_list},on:{"on-select":e.choicing,"on-select-cancel":e.cancing,"on-select-all":e.choicingAll,"on-selection-change":e.cancingAll}}),e._v(" "),r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.totalCount,current:1,"page-size":e.pageSize,transfer:!0,size:e.getFont,"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),e._v(" "),r("Modal",{attrs:{width:"700",title:"机构信息查看"},model:{value:e.viewModal,callback:function(t){e.viewModal=t},expression:"viewModal"}},[r("Form",{attrs:{model:e.viewForm,"label-width":100}},[r("FormItem",{attrs:{label:"机构ID："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgId,callback:function(t){e.$set(e.viewForm,"orgId",t)},expression:"viewForm.orgId"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构编码："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgCode,callback:function(t){e.$set(e.viewForm,"orgCode",t)},expression:"viewForm.orgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构简称："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgBrief,callback:function(t){e.$set(e.viewForm,"orgBrief",t)},expression:"viewForm.orgBrief"}})],1),e._v(" "),r("FormItem",{attrs:{label:"直接上级机构ID："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.upOrgCode,callback:function(t){e.$set(e.viewForm,"upOrgCode",t)},expression:"viewForm.upOrgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构类别："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgCategory,callback:function(t){e.$set(e.viewForm,"orgCategory",t)},expression:"viewForm.orgCategory"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构级别："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgGrade,callback:function(t){e.$set(e.viewForm,"orgGrade",t)},expression:"viewForm.orgGrade"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构层级："}},[r("Input",{attrs:{readonly:!0},model:{value:e.viewForm.orgLevel,callback:function(t){e.$set(e.viewForm,"orgLevel",t)},expression:"viewForm.orgLevel"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{width:"700",title:"机构信息","ok-text":"保存","cancel-text":"关闭","mask-closable":!1,loading:e.loading},on:{"on-ok":function(t){e.saving("addRef")},"on-cancel":function(t){e.reseting("addRef")}},model:{value:e.addModal,callback:function(t){e.addModal=t},expression:"addModal"}},[r("Form",{ref:"addRef",attrs:{model:e.addForm,rules:e.addRules,"label-width":100}},[r("FormItem",{attrs:{label:"机构ID：",prop:"orgId"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgId,callback:function(t){e.$set(e.addForm,"orgId",t)},expression:"addForm.orgId"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构编码：",prop:"orgCode"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgCode,callback:function(t){e.$set(e.addForm,"orgCode",t)},expression:"addForm.orgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构简称：",prop:"orgBrief"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgBrief,callback:function(t){e.$set(e.addForm,"orgBrief",t)},expression:"addForm.orgBrief"}})],1),e._v(" "),r("FormItem",{attrs:{label:"直接上级机构ID：",prop:"upOrgCode"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.upOrgCode,callback:function(t){e.$set(e.addForm,"upOrgCode",t)},expression:"addForm.upOrgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构类别：",prop:"orgCategory"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgCategory,callback:function(t){e.$set(e.addForm,"orgCategory",t)},expression:"addForm.orgCategory"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构级别：",prop:"orgGrade"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgGrade,callback:function(t){e.$set(e.addForm,"orgGrade",t)},expression:"addForm.orgGrade"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构层级：",prop:"orgLevel"}},[r("Input",{attrs:{required:""},model:{value:e.addForm.orgLevel,callback:function(t){e.$set(e.addForm,"orgLevel",t)},expression:"addForm.orgLevel"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{width:"700",title:"机构信息修改","ok-text":"修改","cancel-text":"关闭","mask-closable":!1,loading:e.updloading},on:{"on-ok":function(t){e.saving("updRef")},"on-cancel":function(t){e.reseting("updRef")}},model:{value:e.updModal,callback:function(t){e.updModal=t},expression:"updModal"}},[r("Form",{ref:"updRef",attrs:{model:e.updForm,rules:e.updRules,"label-width":100}},[r("FormItem",{attrs:{label:"机构ID：",prop:"orgId"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgId,callback:function(t){e.$set(e.updForm,"orgId",t)},expression:"updForm.orgId"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构编码：",prop:"orgCode"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgCode,callback:function(t){e.$set(e.updForm,"orgCode",t)},expression:"updForm.orgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构简称：",prop:"orgBrief"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgBrief,callback:function(t){e.$set(e.updForm,"orgBrief",t)},expression:"updForm.orgBrief"}})],1),e._v(" "),r("FormItem",{attrs:{label:"直接上级机构ID：",prop:"upOrgCode"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.upOrgCode,callback:function(t){e.$set(e.updForm,"upOrgCode",t)},expression:"updForm.upOrgCode"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构类别：",prop:"orgCategory"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgCategory,callback:function(t){e.$set(e.updForm,"orgCategory",t)},expression:"updForm.orgCategory"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构级别：",prop:"orgGrade"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgGrade,callback:function(t){e.$set(e.updForm,"orgGrade",t)},expression:"updForm.orgGrade"}})],1),e._v(" "),r("FormItem",{attrs:{label:"机构层级：",prop:"orgLevel"}},[r("Input",{attrs:{required:""},model:{value:e.updForm.orgLevel,callback:function(t){e.$set(e.updForm,"orgLevel",t)},expression:"updForm.orgLevel"}})],1)],1)],1)],1)],1)},a=[];o._withStripped=!0;var n={render:o,staticRenderFns:a};t.default=n}});